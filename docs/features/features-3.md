# Feature Request: Bug Fix - IP Proxy massive failure in single run job                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                     
  ## Context                                                                                                                                                                                                                                                                                                                                                         
  - Sometimes, when IP proxy sources are not reliable, it is possible to the massive attempts failures                                                                                                                                                                                                                                                                                                                                  
  - Current log documentation in high-level is good enough, but still miss a few critical points.                                                                                                                                                                                                                                                                                          
  - When relying on IP proxy, it never falls back to direct IP address                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                     
  ## Desired Outcome                                                                                                                                                                                                                                                                                                                                                 
  - Introduce direct fallback every x amount of attempts:
    - Attempts: Do 3 proxy attempts, then 1 direct/local attempt as the final try for that task. (if user input is 3)
    - Add an allow_direct_fallback flag to FlightRadarClient.fetch_departures(...). 
    If the call used proxies and fails with a proxy/transport error (or with 429 if configured), 
    try once more with proxies=None and strict backoff. The default should allow direct fallback
  - Get more detail log output that would make rare failures easier to root-cause and verify behavior like fallback:                                                                                                                                                                                                                                                                                                                              
    - Run-scoped ID and region appear on every line (easy correlation).                                                                                                                                                                                                                                                                                                                                                                                                                           
    - Concurrency and proxy pool summary is logged up front.                                                                                                                                                                                                                                                                                                                                                                                                                                      
    - Per-component perf spans (API/transform/DB) with durations help spot bottlenecks.                                                                                                                                                                                                                                                                                                                                                                                                           
    - Explicit attempt counts and airport/page context in retry warnings and give-ups.                                                                                                                                                                                                                                                                                                                                                                                                            
    - Upsert counts per page show data yield.
    - Introduce green/yellow/red emoji signals so it is visually easier to identify the row in the log.
                                                                                                                                                                                                                                                                                                                                                                     
  ## Implementation Notes                                                                                                                                                                                                                                                                                                                                            
  - Target files or directories to modify/create (`src/...`, `tests/...`)                                                                                                                                                                                                                                                                                            
  - Coding style expectations (docstrings, type hints, lint rules)                                                                                                                                                                                                                                                                                                   
  - For sure, you must follow the guidance of `AGENTS.md`
                                                                                                                                                                                                                                                                                                                                                                     
  ## Test Plan                                                                                                                                                                                                                                                                                                                                                       
  - Required unit tests (file names, scenarios)                                                                                                                                                                                                                                                                                                                      
  - Integration/manual checks                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                     
  ## Deliverables                                                                                                                                                                                                                                                                                                                                                    
  - Code changes                                                                                                                                                                                                                                                                                                                                                     
  - Tests                                                                                                                                                                                                                                                                                                                                                            
  - Documentation updates: `docs/run_job.md` if necessary                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                     
  ## Additional Guidance                                                                                                                                                                                                                                                                                                                                              
  - What to avoid: you should not break the current runs                                                                                                                                                                                                                                                                                                                 
